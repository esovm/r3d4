;---r3 compiler code.asm;--------------------------; :onshow  e     . calls:1 niv:1 len:17 [ a --  ]w100:;---------ANA; 0	; [ 0 ] ; '.exit	; [ 0 1 ] ; !	; [ 0 1 2 ] ; (	; [ 0 ] ; .exit	; [ 0 ] ; 0?	; [ 0 3 ] ; DROP	; [ 0 3 ] ; UPDATE	; [ 0 ] ; DUP	; [ 0 ] ; EX	; [ 0 0 ] ; REDRAW	; [ 0 ] ; )	; [ 0 ] ; 2DROP	; [ 0 3 ] ; 0	; [ ] ; '.exit	; [ 4 ] ; !	; [ 4 5 ] ; ;	; [ ] ; ---- cells ----; 0 R:0 W:1 A (0:13) 1; 1 R:0 W:0 U (1:3) 0; 2 R:0 W:0 U (2:3) 0; 3 R:1 W:0 U (5:15) 0; 4 R:0 W:0 U (14:16) 0; 5 R:0 W:0 U (15:16) 0;---------GEN; 0add rbp,8mov [rbp],raxxor rax,rax; '.exit; OPTM mov dword[wFF],eaxmov rax,[rbp]sub rbp,8; (_i99:; .exitadd rbp,8mov [rbp],raxmovsxd rax,dword[wFF]; 0?or rax,raxjnz _o99; DROPmov rax,[rbp]sub rbp,8; UPDATEcall SYSREDRAW; DUPadd rbp,8mov [rbp],rax; EXmov rcx,raxmov rax,[rbp]sub rbp,8call rcx; REDRAWcall SYSUPDATE; )jmp _i99_o99:; 2DROPmov rax,[rbp-8]sub rbp,8*2; 0add rbp,8mov [rbp],raxxor rax,rax; '.exit; OPTM mov dword[wFF],eaxmov rax,[rbp]sub rbp,8; ;ret;--------------------------; :exit  e     . calls:1 niv:0 len:4 [  --  ]w101:;---------ANA; 1	; [ ] ; '.exit	; [ 0 ] ; !	; [ 0 1 ] ; ;	; [ ] ; ---- cells ----; 0 R:0 W:0 U A (1:3) 0; 1 R:0 W:0 U (2:3) 0;---------GEN; 1add rbp,8mov [rbp],raxmov rax,$1; '.exit; OPTM mov dword[wFF],eaxmov rax,[rbp]sub rbp,8; ;ret;--------------------------; :mbuffi  l     . calls:3 niv:0 len:9 [  -- a ]w11F:;---------ANA; 'mbuff	; [ ] ; 63	; [ 0 ] ; +	; [ 0 1 ] ; 0	; [ 2 ] ; OVER	; [ 2 3 ] ; C!	; [ 2 3 2 ] ; 1	; [ 2 ] ; -	; [ 2 4 ] ; ;	; [ 5 ] ; ---- cells ----; 0 R:0 W:0 U (1:3) 0; 1 R:0 W:0 U (2:3) 0; 2 R:0 W:1 (3:10) 1; 3 R:0 W:0 U (4:6) 0; 4 R:0 W:0 U (7:8) 0; 5 R:0 W:1 A (8:9) 2;---------GEN; 'mbuffadd rbp,8mov [rbp],raxmov rax,w11E; 63; OPT add rax,$3F; 0add rbp,8mov [rbp],raxxor rax,rax; OVERadd rbp,8mov [rbp],raxmov rax,[rbp-8]; C!mov rcx,[rbp]mov byte[rax],clmov rax,[rbp-8]sub rbp,8*2; 1; OPT sub rax,$1; ;ret;--------------------------; :sign  l  ;  . calls:1 niv:0 len:12 [ ab -- c ]w120:;---------ANA; -?	; [ 0 1 ] ; (	; [ 0 1 ] ; DROP	; [ 0 1 ] ; $2d	; [ 0 ] ; OVER	; [ 0 2 ] ; C!	; [ 0 2 0 ] ; ;	; [ 0 ] ; )	; [ 0 ] ; DROP	; [ 0 1 ] ; 1	; [ 0 ] ; +	; [ 0 3 ] ; ;	; [ 4 ] ; ---- cells ----; 0 R:0 W:1 A (0:11) 1; 1 R:1 W:1 U (0:11) 2; 2 R:0 W:0 U (4:6) 0; 3 R:0 W:0 U (10:11) 0; 4 R:0 W:1 A (11:12) 2;---------GEN; -?or rax,raxjns _oBB; (; DROPmov rax,[rbp]sub rbp,8; $2dadd rbp,8mov [rbp],raxmov rax,$2D; OVERadd rbp,8mov [rbp],raxmov rax,[rbp-8]; C!mov rcx,[rbp]mov byte[rax],clmov rax,[rbp-8]sub rbp,8*2; ;ret; )_oBB:; DROPmov rax,[rbp]sub rbp,8; 1; OPT add rax,$1; ;ret;--------------------------; :.d  e     . calls:1 niv:1 len:21 [ a -- b ]w121:;---------ANA; DUP	; [ 0 ] ; ABS	; [ 0 0 ] ; mbuffi	; [ 0 1 ] ; SWAP	; [ 0 1 2 ] ; (	; [ 0 2 1 ] ; DUP	; [ 0 2 1 ] ; ^r3/sys/asmbase.r3	; [ 0 2 1 1 ] ; sys/asmbase.r3	; [ 0 2 1 1 3 ] ; *>>	; [ 0 2 1 1 3 4 ] ; DUP	; [ 0 2 1 5 ] ; asmbase.r3	; [ 0 2 1 5 5 ] ; >>	; [ 0 2 1 5 5 6 ] ; -	; [ 0 2 1 5 7 ] ; SWAP	; [ 0 2 1 8 ] ; OVER	; [ 0 2 8 1 ] ; ase.r3	; [ 0 2 8 1 8 ] ; *	; [ 0 2 8 1 8 9 ] ; -	; [ 0 2 8 1 A ] ; $30	; [ 0 2 8 B ] ; +	; [ 0 2 8 B C ] ; PICK2	; [ 0 2 8 D ] ; C!	; [ 0 2 8 D 2 ] ; SWAP	; [ 0 2 8 ] ; 1	; [ 0 8 2 ] ; -	; [ 0 8 2 E ] ; SWAP	; [ 0 8 F ] ; 1?	; [ 0 F 8 ] ; )	; [ 0 F 8 ] ; DROP	; [ 0 F 8 ] ; SWAP	; [ 0 F ] ; sign	; [ F 0 ] ; ;	; [ 10 ] ; ---- cells ----; 0 R:0 W:1 (0:31) 1; 1 R:0 W:1 (2:19) 2; 2 R:0 W:0 U (3:27) 0; 3 R:0 W:0 U (7:9) 0; 4 R:0 W:0 U (8:9) 0; 5 R:0 W:1 U (9:13) 3; 6 R:0 W:0 U (11:12) 0; 7 R:0 W:1 U (12:13) 4; 8 R:1 W:1 (13:29) 4; 9 R:0 W:0 U (16:17) 0; A R:0 W:1 U (17:18) 3; B R:0 W:1 U (18:20) 3; C R:0 W:0 U (19:20) 0; D R:0 W:1 U (20:22) 3; E R:0 W:0 U (24:25) 0; F R:0 W:1 (25:31) 3; 10 R:0 W:0 U A (31:32) 0;---------GEN; DUPadd rbp,8mov [rbp],rax; ABScqoadd rdx,rdxxor rax,rdx; mbufficall w11F; SWAPxchg rax,[rbp]; (_iBC:; DUPadd rbp,8mov [rbp],rax; ^r3/sys/asmbase.r3add rbp,8mov [rbp],raxmov rax,$66666667; sys/asmbase.r3; OPTX cqoimul qword[rbp]sub rbp,8shrd rax,rdx,34; DUPadd rbp,8mov [rbp],rax; asmbase.r3; OPTX sar rax,$3F; -neg raxadd rax,[rbp]sub rbp,8; SWAPxchg rax,[rbp]; OVERadd rbp,8mov [rbp],raxmov rax,[rbp-8]; ase.r3; OPTX imul rax,$A; -neg raxadd rax,[rbp]sub rbp,8; $30; OPT add rax,$30; PICK2add rbp,8mov [rbp],raxmov rax,[rbp-8*2]; C!mov rcx,[rbp]mov byte[rax],clmov rax,[rbp-8]sub rbp,8*2; SWAPxchg rax,[rbp]; 1; OPT sub rax,$1; SWAPxchg rax,[rbp]; 1?or rax,raxjz _oBC; )jmp _iBC_oBC:; DROPmov rax,[rbp]sub rbp,8; SWAPxchg rax,[rbp]; signjmp w120; ;;--------------------------; :.b  e     . calls:1 niv:1 len:22 [ a -- b ]w122:;---------ANA; mbuffi	; [ 0 ] ; SWAP	; [ 0 1 ] ; (	; [ 1 0 ] ; DUP	; [ 1 0 ] ; $1	; [ 1 0 0 ] ; AND	; [ 1 0 0 2 ] ; $30	; [ 1 0 3 ] ; +	; [ 1 0 3 4 ] ; PICK2	; [ 1 0 5 ] ; C!	; [ 1 0 5 1 ] ; SWAP	; [ 1 0 ] ; 1	; [ 0 1 ] ; -	; [ 0 1 6 ] ; SWAP	; [ 0 7 ] ; 1	; [ 7 0 ] ; >>>	; [ 7 0 8 ] ; 1?	; [ 7 9 ] ; )	; [ 7 9 ] ; DROP	; [ 7 9 ] ; 1	; [ 7 ] ; +	; [ 7 A ] ; ;	; [ B ] ; ---- cells ----; 0 R:0 W:1 (0:18) 1; 1 R:0 W:0 U (1:15) 0; 2 R:0 W:0 U (5:6) 0; 3 R:0 W:1 U (6:8) 2; 4 R:0 W:0 U (7:8) 0; 5 R:0 W:1 U (8:10) 2; 6 R:0 W:0 U (12:13) 0; 7 R:0 W:1 (13:21) 2; 8 R:0 W:0 U (15:16) 0; 9 R:1 W:1 U (16:19) 3; A R:0 W:0 U (20:21) 0; B R:0 W:1 A (21:22) 3;---------GEN; mbufficall w11F; SWAPxchg rax,[rbp]; (_iBD:; DUPadd rbp,8mov [rbp],rax; $1; OPT and rax,$1; $30; OPT add rax,$30; PICK2add rbp,8mov [rbp],raxmov rax,[rbp-8*2]; C!mov rcx,[rbp]mov byte[rax],clmov rax,[rbp-8]sub rbp,8*2; SWAPxchg rax,[rbp]; 1; OPT sub rax,$1; SWAPxchg rax,[rbp]; 1; OPT shr rax,$1; 1?or rax,raxjz _oBD; )jmp _iBD_oBD:; DROPmov rax,[rbp]sub rbp,8; 1; OPT add rax,$1; ;ret;--------------------------; :.h  e     . calls:2 niv:1 len:28 [ a -- b ]w123:;---------ANA; mbuffi	; [ 0 ] ; SWAP	; [ 0 1 ] ; (	; [ 1 0 ] ; DUP	; [ 1 0 ] ; $f	; [ 1 0 0 ] ; AND	; [ 1 0 0 2 ] ; $30	; [ 1 0 3 ] ; +	; [ 1 0 3 4 ] ; $39	; [ 1 0 5 ] ; >?	; [ 1 0 5 6 ] ; (	; [ 1 0 5 ] ; 7	; [ 1 0 5 ] ; +	; [ 1 0 5 7 ] ; )	; [ 1 0 8 ] ; PICK2	; [ 1 0 5 ] ; C!	; [ 1 0 5 1 ] ; SWAP	; [ 1 0 ] ; 1	; [ 0 1 ] ; -	; [ 0 1 9 ] ; SWAP	; [ 0 A ] ; 4	; [ A 0 ] ; >>>	; [ A 0 B ] ; 1?	; [ A C ] ; )	; [ A C ] ; DROP	; [ A C ] ; 1	; [ A ] ; +	; [ A D ] ; ;	; [ E ] ; ---- cells ----; 0 R:0 W:1 (0:22) 1; 1 R:0 W:0 U (1:19) 0; 2 R:0 W:0 U (5:6) 0; 3 R:0 W:1 U (6:8) 2; 4 R:0 W:0 U (7:8) 0; 5 R:1 W:1 U (8:17) 2; 6 R:1 W:0 U (9:10) 0; 7 R:0 W:0 U (12:13) 0; 8 R:0 W:1 U (13:0) 3; 9 R:0 W:0 U (18:19) 0; A R:0 W:1 (19:27) 3; B R:0 W:0 U (21:22) 0; C R:1 W:1 U (22:25) 2; D R:0 W:0 U (26:27) 0; E R:0 W:1 A (27:28) 2;---------GEN; mbufficall w11F; SWAPxchg rax,[rbp]; (_iBE:; DUPadd rbp,8mov [rbp],rax; $f; OPT and rax,$F; $30; OPT add rax,$30; $39; OPTC cmp rax,$39jle _oBF; (; 7; OPT add rax,$7; )_oBF:; PICK2add rbp,8mov [rbp],raxmov rax,[rbp-8*2]; C!mov rcx,[rbp]mov byte[rax],clmov rax,[rbp-8]sub rbp,8*2; SWAPxchg rax,[rbp]; 1; OPT sub rax,$1; SWAPxchg rax,[rbp]; 4; OPT shr rax,$4; 1?or rax,raxjz _oBE; )jmp _iBE_oBE:; DROPmov rax,[rbp]sub rbp,8; 1; OPT add rax,$1; ;ret;--------------------------; :mark  e     . calls:1 niv:0 len:14 [  --  ]w12B:;---------ANA; here	; [ ] ; 0?	; [ 0 ] ; (	; [ 0 ] ; MEM	; [ 0 ] ; DUP	; [ 0 1 ] ; 'here	; [ 0 1 1 ] ; !	; [ 0 1 1 2 ] ; NIP	; [ 0 1 ] ; )	; [ 1 ] ; memmap>	; [ 0 ] ; !+	; [ 0 3 ] ; 'memmap>	; [ 0 ] ; !	; [ 0 4 ] ; ;	; [ ] ; ---- cells ----; 0 R:1 W:0 U A (1:13) 0; 1 R:0 W:0 U (4:7) 0; 2 R:0 W:0 U (6:7) 0; 3 R:0 W:1 (10:11) 1; 4 R:0 W:0 U (12:13) 0;---------GEN; hereadd rbp,8mov [rbp],raxmovsxd rax,dword[w128]; 0?or rax,raxjnz _oC6; (; MEMadd rbp,8mov [rbp],raxmov rax,[FREE_MEM]; DUPadd rbp,8mov [rbp],rax; 'here; OPTM mov dword[w128],eaxmov rax,[rbp]sub rbp,8; NIPsub rbp,8; )_oC6:; memmap>add rbp,8mov [rbp],raxmovsxd rax,dword[w12A]; !+mov rcx,[rbp]mov dword[rax],ecxadd rax,4sub rbp,8; 'memmap>; OPTM mov dword[w12A],eaxmov rax,[rbp]sub rbp,8; ;ret;--------------------------; :empty  e  ;  . calls:1 niv:0 len:19 [  --  ]w12C:;---------ANA; memmap>	; [ ] ; 'memmap	; [ 0 ] ; =?	; [ 0 1 ] ; (	; [ 0 ] ; DROP	; [ 0 ] ; MEM	; [ ] ; 'here	; [ 2 ] ; !	; [ 2 3 ] ; ;	; [ ] ; )	; [ ] ; 4	; [ 0 ] ; -	; [ 0 4 ] ; DUP	; [ 5 ] ; 'memmap>	; [ 5 5 ] ; !	; [ 5 5 6 ] ; @	; [ 5 ] ; 'here	; [ 5 ] ; !	; [ 5 7 ] ; ;	; [ ] ; ---- cells ----; 0 R:1 W:0 U A (1:13) 0; 1 R:1 W:0 U (2:3) 0; 2 R:0 W:0 U (6:8) 0; 3 R:0 W:0 U (7:8) 0; 4 R:0 W:0 U (11:12) 0; 5 R:0 W:2 (12:19) 1; 6 R:0 W:0 U (14:15) 0; 7 R:0 W:0 U (17:18) 0;---------GEN; memmap>add rbp,8mov [rbp],raxmovsxd rax,dword[w12A]; 'memmap; OPTC cmp rax,w129jne _oC7; (; DROPmov rax,[rbp]sub rbp,8; MEMadd rbp,8mov [rbp],raxmov rax,[FREE_MEM]; 'here; OPTM mov dword[w128],eaxmov rax,[rbp]sub rbp,8; ;ret; )_oC7:; 4; OPT sub rax,$4; DUPadd rbp,8mov [rbp],rax; 'memmap>; OPTM mov dword[w12A],eaxmov rax,[rbp]sub rbp,8; @movsxd rax,dword [rax]; 'here; OPTM mov dword[w128],eaxmov rax,[rbp]sub rbp,8; ;ret;--------------------------; :cls  e     . calls:1 niv:0 len:13 [  --  ]w193:;---------ANA; VFRAME	; [ ] ; 0	; [ 0 ] ; DUP	; [ 0 1 ] ; 32	; [ 0 1 1 ] ; <<	; [ 0 1 1 2 ] ; OR	; [ 0 1 3 ] ; SW	; [ 0 4 ] ; SH	; [ 0 4 5 ] ; *	; [ 0 4 5 6 ] ; 1	; [ 0 4 7 ] ; >>	; [ 0 4 7 8 ] ; QFILL	; [ 0 4 9 ] ; ;	; [ ] ; ---- cells ----; 0 R:0 W:0 U A SI (1:12) 0; 1 R:0 W:0 U (2:7) 0; 2 R:0 W:0 U (4:5) 0; 3 R:0 W:1 U (5:6) 1; 4 R:0 W:1 DI (6:12) 1; 5 R:0 W:0 U (7:9) 0; 6 R:0 W:0 U (8:9) 0; 7 R:0 W:1 U (9:11) 2; 8 R:0 W:0 U (10:11) 0; 9 R:0 W:1 C (11:12) 2;---------GEN; VFRAMEadd rbp,8mov [rbp],raxmov rax,[SYSFRAME]; 0add rbp,8mov [rbp],raxxor rax,rax; DUPadd rbp,8mov [rbp],rax; 32; OPT shl rax,$20; ORor rax,[rbp]sub rbp,8; SWadd rbp,8mov [rbp],raxmov rax,XRES; SHadd rbp,8mov [rbp],raxmov rax,YRES; *imul rax,[rbp]sub rbp,8; 1; OPT sar rax,$1; QFILLmov rcx,raxmovsxd rax,dword[rbp]movsxd rdi,dword[rbp-8]rep stosqmov rax,[rbp-8*2]sub rbp,8*3; ;ret;--------------------------; :xy>v  e     . calls:1 niv:0 len:8 [ ab -- c ]w194:;---------ANA; SW	; [ 0 1 ] ; *	; [ 0 1 2 ] ; +	; [ 0 3 ] ; 2	; [ 4 ] ; <<	; [ 4 5 ] ; VFRAME	; [ 6 ] ; +	; [ 6 7 ] ; ;	; [ 8 ] ; ---- cells ----; 0 R:0 W:1 (0:3) 1; 1 R:0 W:1 U (0:2) 2; 2 R:0 W:0 U (1:2) 0; 3 R:0 W:1 U (2:3) 2; 4 R:0 W:1 U (3:5) 2; 5 R:0 W:0 U (4:5) 0; 6 R:0 W:1 U (5:7) 2; 7 R:0 W:0 U (6:7) 0; 8 R:0 W:1 A (7:8) 2;---------GEN; SWadd rbp,8mov [rbp],raxmov rax,XRES; *imul rax,[rbp]sub rbp,8; +add rax,[rbp]sub rbp,8; 2; OPT shl rax,$2; VFRAMEadd rbp,8mov [rbp],raxmov rax,[SYSFRAME]; +add rax,[rbp]sub rbp,8; ;ret;--------------------------; :setpix  l  ;  . calls:1 niv:0 len:9 [ ab -- c ]w22A:;---------ANA; NA?	; [ 0 1 ] ; (	; [ 0 ] ; 4	; [ 0 ] ; A+	; [ 0 2 ] ; ;	; [ 0 ] ; )	; [ 0 ] ; ink	; [ 0 ] ; A!+	; [ 0 3 ] ; ;	; [ 0 ] ; ---- cells ----; 0 R:1 W:1 A (0:9) 1; 1 R:1 W:1 (0:1) 2; 2 R:0 W:0 U (3:4) 0; 3 R:0 W:0 U (7:8) 0;---------GEN; NA?mov rbx,raxmov rax,[rbp]sub rbp,8test rax,rbxjnz _o161; (; 4add rbp,8mov [rbp],raxmov rax,$4; A+add r8,raxmov rax,[rbp]sub rbp,8; ;ret; )_o161:; inkadd rbp,8mov [rbp],raxmovsxd rax,dword[w52]; A!+mov dword[r8],eaxadd r8,4mov rax,[rbp]sub rbp,8; ;ret;--------------------------; :char8i  e'    . calls:1 niv:1 len:53 [ a --  ]w22B:;---------ANA; ccx	; [ 0 ] ; ccy	; [ 0 1 ] ; xy>v	; [ 0 1 2 ] ; >A	; [ 0 3 ] ; 3	; [ 0 ] ; <<	; [ 0 4 ] ; DUP	; [ 5 ] ; 1	; [ 5 5 ] ; >>	; [ 5 5 6 ] ; +	; [ 5 7 ] ; 'rom8x12	; [ 8 ] ; +	; [ 8 9 ] ; SW	; [ A ] ; 8	; [ A B ] ; -	; [ A B C ] ; 2	; [ A D ] ; <<	; [ A D E ] ; SWAP	; [ A F ] ; 12	; [ F A ] ; (	; [ F A 10 ] ; 1?	; [ F A 10 ] ; 1	; [ F A 10 ] ; -	; [ F A 10 11 ] ; SWAP	; [ F A 12 ] ; C@+	; [ F 12 A ] ; $80	; [ F 12 A 13 ] ; (	; [ F 12 A 13 14 ] ; 1?	; [ F 12 A 13 14 ] ; OVER	; [ F 12 A 13 14 ] ; setpix	; [ F 12 A 13 14 13 ] ; 1	; [ F 12 A 13 15 ] ; >>	; [ F 12 A 13 15 16 ] ; )	; [ F 12 A 13 17 ] ; 2DROP	; [ F 12 A 13 14 ] ; PICK2	; [ F 12 A ] ; A+	; [ F 12 A F ] ; SWAP	; [ F 12 A ] ; )	; [ F A 12 ] ; SW	; [ F 12 A 13 14 ] ; 2	; [ F 12 A 13 14 18 ] ; <<	; [ F 12 A 13 14 18 19 ] ; DUP	; [ F 12 A 13 14 1A ] ; 1	; [ F 12 A 13 14 1A 1A ] ; <<	; [ F 12 A 13 14 1A 1A 1B ] ; +	; [ F 12 A 13 14 1A 1C ] ; 2	; [ F 12 A 13 14 1D ] ; <<	; [ F 12 A 13 14 1D 1E ] ; 32	; [ F 12 A 13 14 1F ] ; -	; [ F 12 A 13 14 1F 20 ] ; NEG	; [ F 12 A 13 14 21 ] ; A+	; [ F 12 A 13 14 22 ] ; 3DROP	; [ F 12 A 13 14 ] ; ;	; [ F 12 ] ; ---- cells ----; 0 R:0 W:1 (0:6) 1; 1 R:0 W:0 U (1:3) 0; 2 R:0 W:0 U (2:3) 0; 3 R:0 W:0 U (3:4) 0; 4 R:0 W:0 U (5:6) 0; 5 R:0 W:1 U (6:11) 2; 6 R:0 W:0 U (8:9) 0; 7 R:0 W:1 U (9:10) 3; 8 R:0 W:1 U (10:12) 3; 9 R:0 W:0 U (11:12) 0; A R:0 W:2 (12:52) 3; B R:0 W:0 U (13:15) 0; C R:0 W:0 U (14:15) 0; D R:0 W:1 U (15:17) 2; E R:0 W:0 U (16:17) 0; F R:0 W:1 (17:53) 2; 10 R:1 W:0 U (19:23) 0; 11 R:0 W:0 U (22:23) 0; 12 R:0 W:1 A (23:53) 4; 13 R:0 W:0 U (25:54) 0; 14 R:1 W:0 U (26:54) 0; 15 R:0 W:0 U (30:32) 0; 16 R:0 W:0 U (31:32) 0; 17 R:0 W:1 U (32:0) 5; 18 R:0 W:0 U (39:41) 0; 19 R:0 W:0 U (40:41) 0; 1A R:0 W:1 (41:45) 5; 1B R:0 W:0 U (43:44) 0; 1C R:0 W:1 U (44:45) 6; 1D R:0 W:1 U (45:47) 6; 1E R:0 W:0 U (46:47) 0; 1F R:0 W:1 U (47:49) 6; 20 R:0 W:0 U (48:49) 0; 21 R:0 W:1 U (49:50) 6; 22 R:0 W:1 (50:51) 6;---------GEN; ccxadd rbp,8mov [rbp],raxmovsxd rax,dword[w18F]; ccyadd rbp,8mov [rbp],raxmovsxd rax,dword[w190]; xy>vcall w194; >Amov r8,raxmov rax,[rbp]sub rbp,8; 3; OPT shl rax,$3; DUPadd rbp,8mov [rbp],rax; 1; OPT sar rax,$1; +add rax,[rbp]sub rbp,8; 'rom8x12; AOPT add rax,w229; SWadd rbp,8mov [rbp],raxmov rax,XRES; 8; OPT sub rax,$8; 2; OPT shl rax,$2; SWAPxchg rax,[rbp]; 12add rbp,8mov [rbp],raxmov rax,$C; (_i162:; 1?or rax,raxjz _o162; 1; OPT sub rax,$1; SWAPxchg rax,[rbp]; C@+movsx rbx,byte [rax]add rax,1add rbp,8mov [rbp],raxmov rax,rbx; $80add rbp,8mov [rbp],raxmov rax,$80; (_i163:; 1?or rax,raxjz _o163; OVERadd rbp,8mov [rbp],raxmov rax,[rbp-8]; setpixcall w22A; 1; OPT sar rax,$1; )jmp _i163_o163:; 2DROPmov rax,[rbp-8]sub rbp,8*2; PICK2add rbp,8mov [rbp],raxmov rax,[rbp-8*2]; A+add r8,raxmov rax,[rbp]sub rbp,8; SWAPxchg rax,[rbp]; )jmp _i162_o162:; SWadd rbp,8mov [rbp],raxmov rax,XRES; 2; OPT shl rax,$2; DUPadd rbp,8mov [rbp],rax; 1; OPT shl rax,$1; +add rax,[rbp]sub rbp,8; 2; OPT shl rax,$2; 32; OPT sub rax,$20; NEGneg rax; A+add r8,raxmov rax,[rbp]sub rbp,8; 3DROPmov rax,[rbp-8*2]sub rbp,8*3; ;ret;--------------------------; :size8i  e'    . calls:1 niv:0 len:3 [ a -- b ]w22C:;---------ANA; 8	; [ 0 ] ; NIP	; [ 0 1 ] ; ;	; [ 1 ] ; ---- cells ----; 0 R:0 W:1 (0:0) 1; 1 R:0 W:0 U A (1:3) 0;---------GEN; 8add rbp,8mov [rbp],raxmov rax,$8; NIPsub rbp,8; ;ret;--------------------------; :emit  e     . calls:1 niv:3 len:10 [ a --  ]w240:;---------ANA; DUP	; [ 0 ] ; 'char8i	; [ 0 0 ] ; EX	; [ 0 0 1 ] ; 'size8i	; [ 0 ] ; EX	; [ 0 2 ] ; 'ccx	; [ 3 ] ; +!	; [ 3 4 ] ; ;	; [ ] ; ---- cells ----; 0 R:0 W:1 (0:7) 1; 1 R:0 W:0 U (2:0) 0; 2 R:0 W:0 U (4:0) 0; 3 R:0 W:0 U (5:7) 0; 4 R:0 W:0 U (6:7) 0;---------GEN; DUPadd rbp,8mov [rbp],rax; 'char8iadd rbp,8mov [rbp],raxmov rax,w22B; EXmov rcx,raxmov rax,[rbp]sub rbp,8call rcx; 'size8iadd rbp,8mov [rbp],raxmov rax,w22C; EXmov rcx,raxmov rax,[rbp]sub rbp,8call rcx; 'ccx; OPTM add dword[w18F],eaxmov rax,[rbp]sub rbp,8; ;ret;--------------------------; :cr  e     . calls:7 niv:0 len:7 [  --  ]w243:;---------ANA; 12	; [ ] ; 'ccy	; [ 0 ] ; +!	; [ 0 1 ] ; 0	; [ ] ; 'ccx	; [ 2 ] ; !	; [ 2 3 ] ; ;	; [ ] ; ---- cells ----; 0 R:0 W:0 U (1:3) 0; 1 R:0 W:0 U (2:3) 0; 2 R:0 W:0 U (4:6) 0; 3 R:0 W:0 U (5:6) 0;---------GEN; 12add rbp,8mov [rbp],raxmov rax,$C; 'ccy; OPTM add dword[w190],eaxmov rax,[rbp]sub rbp,8; 0add rbp,8mov [rbp],raxxor rax,rax; 'ccx; OPTM mov dword[w18F],eaxmov rax,[rbp]sub rbp,8; ;ret;--------------------------; :home  e     . calls:1 niv:0 len:7 [  --  ]w249:;---------ANA; 0	; [ ] ; 'ccx	; [ 0 ] ; !	; [ 0 1 ] ; 0	; [ ] ; 'ccy	; [ 2 ] ; !	; [ 2 3 ] ; ;	; [ ] ; ---- cells ----; 0 R:0 W:0 U (1:3) 0; 1 R:0 W:0 U (2:3) 0; 2 R:0 W:0 U (4:6) 0; 3 R:0 W:0 U (5:6) 0;---------GEN; 0add rbp,8mov [rbp],raxxor rax,rax; 'ccx; OPTM mov dword[w18F],eaxmov rax,[rbp]sub rbp,8; 0add rbp,8mov [rbp],raxxor rax,rax; 'ccy; OPTM mov dword[w190],eaxmov rax,[rbp]sub rbp,8; ;ret;--------------------------; :emits  e     . calls:6 niv:4 len:7 [ a --  ]w24A:;---------ANA; (	; [ 0 ] ; C@+	; [ 0 ] ; 1?	; [ 0 1 ] ; emit	; [ 0 1 ] ; )	; [ 0 ] ; 2DROP	; [ 0 1 ] ; ;	; [ ] ; ---- cells ----; 0 R:0 W:2 (0:6) 1; 1 R:1 W:0 U (2:6) 0;---------GEN; (_i16F:; C@+movsx rbx,byte [rax]add rax,1add rbp,8mov [rbp],raxmov rax,rbx; 1?or rax,raxjz _o16F; emitcall w240; )jmp _i16F_o16F:; 2DROPmov rax,[rbp-8]sub rbp,8*2; ;ret;--------------------------; :test1  l'    . calls:1 niv:1 len:5 [  --  ]w289:;---------ANA; here	; [ ] ; .h	; [ 0 ] ; emits	; [ 1 ] ; cr	; [ ] ; ;	; [ ] ; ---- cells ----; 0 R:0 W:0 U (1:2) 0; 1 R:0 W:0 U (2:3) 0;---------GEN; hereadd rbp,8mov [rbp],raxmovsxd rax,dword[w128]; .hcall w123; emitscall w24A; crjmp w243; ;;--------------------------; :test2  l'    . calls:1 niv:1 len:5 [  --  ]w28A:;---------ANA; here	; [ ] ; .b	; [ 0 ] ; emits	; [ 1 ] ; cr	; [ ] ; ;	; [ ] ; ---- cells ----; 0 R:0 W:0 U (1:2) 0; 1 R:0 W:0 U (2:3) 0;---------GEN; hereadd rbp,8mov [rbp],raxmovsxd rax,dword[w128]; .bcall w122; emitscall w24A; crjmp w243; ;;--------------------------; :test  l'    . calls:1 niv:1 len:70 [  --  ]w28C:;---------ANA; cls	; [ ] ; home	; [ ] ; $ffffff	; [ ] ; 'ink	; [ 0 ] ; !	; [ 0 1 ] ; "hola "	; [ ] ; emits	; [ 2 ] ; cr	; [ ] ; $ff	; [ ] ; 'ink	; [ 3 ] ; !	; [ 3 4 ] ; "que tal"	; [ ] ; emits	; [ 5 ] ; cr	; [ ] ; $ff0000	; [ ] ; 'ink	; [ 6 ] ; !	; [ 6 7 ] ; cc	; [ ] ; .d	; [ 8 ] ; emits	; [ 9 ] ; cr	; [ ] ; here	; [ ] ; .h	; [ A ] ; emits	; [ B ] ; cr	; [ ] ; $ff00	; [ ] ; 'ink	; [ C ] ; !	; [ C D ] ; cr	; [ ] ; 'vac	; [ ] ; cc	; [ E ] ; $1	; [ E F ] ; AND	; [ E F 10 ] ; 2	; [ E 11 ] ; <<	; [ E 11 12 ] ; +	; [ E 13 ] ; @	; [ 14 ] ; EX	; [ 14 ] ; KEY	; [ ] ; $101b	; [ 15 ] ; =?	; [ 15 16 ] ; (	; [ 15 ] ; exit	; [ 15 ] ; )	; [ 15 ] ; $4052	; [ 15 ] ; =?	; [ 15 17 ] ; (	; [ 15 ] ; 1	; [ 15 ] ; 'cc	; [ 15 18 ] ; +!	; [ 15 18 19 ] ; )	; [ 15 ] ; $4051	; [ 15 ] ; =?	; [ 15 1A ] ; (	; [ 15 ] ; -1	; [ 15 ] ; 'cc	; [ 15 1B ] ; +!	; [ 15 1B 1C ] ; )	; [ 15 ] ; $403a	; [ 15 ] ; =?	; [ 15 1D ] ; (	; [ 15 ] ; mark	; [ 15 ] ; )	; [ 15 ] ; $403b	; [ 15 ] ; =?	; [ 15 1E ] ; (	; [ 15 ] ; empty	; [ 15 ] ; )	; [ 15 ] ; DROP	; [ 15 ] ; ;	; [ ] ; ---- cells ----; 0 R:0 W:0 U (3:5) 0; 1 R:0 W:0 U (4:5) 0; 2 R:0 W:0 U (6:7) 0; 3 R:0 W:0 U (9:11) 0; 4 R:0 W:0 U (10:11) 0; 5 R:0 W:0 U (12:13) 0; 6 R:0 W:0 U (15:17) 0; 7 R:0 W:0 U (16:17) 0; 8 R:0 W:0 U (18:19) 0; 9 R:0 W:0 U (19:20) 0; A R:0 W:0 U (22:23) 0; B R:0 W:0 U (23:24) 0; C R:0 W:0 U (26:28) 0; D R:0 W:0 U (27:28) 0; E R:0 W:0 U (30:36) 0; F R:0 W:0 U (31:33) 0; 10 R:0 W:0 U (32:33) 0; 11 R:0 W:1 U (33:35) 1; 12 R:0 W:0 U (34:35) 0; 13 R:0 W:1 U (35:36) 1; 14 R:0 W:2 (36:0) 1; 15 R:5 W:0 U (39:69) 0; 16 R:1 W:0 U (40:41) 0; 17 R:1 W:0 U (45:46) 0; 18 R:0 W:0 U (48:50) 0; 19 R:0 W:0 U (49:50) 0; 1A R:1 W:0 U (52:53) 0; 1B R:0 W:0 U (55:57) 0; 1C R:0 W:0 U (56:57) 0; 1D R:1 W:0 U (59:60) 0; 1E R:1 W:0 U (64:65) 0;---------GEN; clscall w193; homecall w249; $ffffffadd rbp,8mov [rbp],raxmov rax,$FFFFFF; 'ink; OPTM mov dword[w52],eaxmov rax,[rbp]sub rbp,8; "hola "add rbp,8mov [rbp],raxmov rax,str0; emitscall w24A; crcall w243; $ffadd rbp,8mov [rbp],raxmov rax,$FF; 'ink; OPTM mov dword[w52],eaxmov rax,[rbp]sub rbp,8; "que tal"add rbp,8mov [rbp],raxmov rax,str1; emitscall w24A; crcall w243; $ff0000add rbp,8mov [rbp],raxmov rax,$FF0000; 'ink; OPTM mov dword[w52],eaxmov rax,[rbp]sub rbp,8; ccadd rbp,8mov [rbp],raxmovsxd rax,dword[w287]; .dcall w121; emitscall w24A; crcall w243; hereadd rbp,8mov [rbp],raxmovsxd rax,dword[w128]; .hcall w123; emitscall w24A; crcall w243; $ff00add rbp,8mov [rbp],raxmov rax,$FF00; 'ink; OPTM mov dword[w52],eaxmov rax,[rbp]sub rbp,8; crcall w243; 'vacadd rbp,8mov [rbp],raxmov rax,w28B; ccadd rbp,8mov [rbp],raxmovsxd rax,dword[w287]; $1; OPT and rax,$1; 2; OPT shl rax,$2; +add rax,[rbp]sub rbp,8; @movsxd rax,dword [rax]; EXmov rcx,raxmov rax,[rbp]sub rbp,8call rcx; KEYadd rbp,8mov [rbp],raxmov eax,dword[SYSKEY]; $101b; OPTC cmp rax,$101Bjne _o1A6; (; exitcall w101; )_o1A6:; $4052; OPTC cmp rax,$4052jne _o1A7; (; 1add rbp,8mov [rbp],raxmov rax,$1; 'cc; OPTM add dword[w287],eaxmov rax,[rbp]sub rbp,8; )_o1A7:; $4051; OPTC cmp rax,$4051jne _o1A8; (; -1add rbp,8mov [rbp],raxmov rax,$FFFFFFFFFFFFFFFF; 'cc; OPTM add dword[w287],eaxmov rax,[rbp]sub rbp,8; )_o1A8:; $403a; OPTC cmp rax,$403Ajne _o1A9; (; markcall w12B; )_o1A9:; $403b; OPTC cmp rax,$403Bjne _o1AA; (; emptycall w12C; )_o1AA:; DROPmov rax,[rbp]sub rbp,8; ;ret;--------------------------; :  l     . calls:1 niv:2 len:3 [  --  ]INICIO:;---------ANA; 'test	; [ ] ; onshow	; [ 0 ] ; ;	; [ ] ; ---- cells ----; 0 R:0 W:0 U (1:2) 0;---------GEN; 'testadd rbp,8mov [rbp],raxmov rax,w28C; onshowjmp w100; ; 